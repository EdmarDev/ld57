[gd_scene load_steps=17 format=3 uid="uid://o520a5hfntr2"]

[ext_resource type="Script" uid="uid://d2kteb84xkaa5" path="res://enemies/enemy.gd" id="1_a6vjd"]
[ext_resource type="Texture2D" uid="uid://dn3y48ug25aij" path="res://fish2.png" id="1_fw1ev"]
[ext_resource type="Script" uid="uid://dy4qwn25ddjl4" path="res://enemies/linear_walker.gd" id="1_orwns"]
[ext_resource type="Script" uid="uid://bx8y3v1iyo1qn" path="res://enemies/kill_area.gd" id="2_7frlh"]
[ext_resource type="Script" uid="uid://d05fwi2rqf4n2" path="res://visibility_despawner.gd" id="5_07tka"]
[ext_resource type="Script" uid="uid://db5kcbw0qqb68" path="res://enemies/light_burst_detector.gd" id="6_3t1x0"]

[sub_resource type="CircleShape2D" id="CircleShape2D_7frlh"]
radius = 52.0865

[sub_resource type="Gradient" id="Gradient_wrnuo"]
offsets = PackedFloat32Array(0, 0.733766)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_fw1ev"]
gradient = SubResource("Gradient_wrnuo")
width = 192
height = 192
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_fw1ev"]
blend_mode = 1
light_mode = 1

[sub_resource type="Gradient" id="Gradient_7frlh"]
interpolation_mode = 1
offsets = PackedFloat32Array(0, 0.551948, 0.642857, 0.766234, 1)
colors = PackedColorArray(0.51, 0.885667, 1, 1, 0.509804, 0.886275, 1, 1, 0.51, 0.885667, 1, 0.560784, 0.51, 0.885667, 1, 0.290196, 0, 0, 0, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_orwns"]
gradient = SubResource("Gradient_7frlh")
width = 18
height = 18
fill = 1
fill_from = Vector2(0.5, 0.5)
fill_to = Vector2(0.85, 0.85)

[sub_resource type="Animation" id="Animation_fw1ev"]
resource_name = "sway"
length = 4.0
loop_mode = 1
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Light:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0, 0, 0, 0, 0),
"points": PackedFloat32Array(110, -0.25, 0, 0.25, 0, 104, -0.25, 0, 0.25, 0, 114, -0.25, 0, 0.25, 0, 120, -0.25, 0, 0.25, 0, 110, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0, 0.99, 2.1, 3.46, 4)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Light:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0, 0, 0, 0, 0),
"points": PackedFloat32Array(0, -0.25, 0, 0.333333, 10.5, -4, -0.223333, 5.5, 0.293333, -9.5, -3.5, -0.233333, -8.5, 0.366667, 21.5, 6.5, -0.26, 10.5, 0.306667, -16.5, 0, -0.166667, -12.5, 0.3, 25.5),
"times": PackedFloat32Array(0, 0.99, 1.7, 3.1, 4)
}

[sub_resource type="Animation" id="Animation_7frlh"]
length = 0.001
tracks/0/type = "bezier"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Light:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(110, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}
tracks/1/type = "bezier"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Light:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"handle_modes": PackedInt32Array(0),
"points": PackedFloat32Array(0, -0.25, 0, 0.25, 0),
"times": PackedFloat32Array(0)
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_orwns"]
_data = {
&"RESET": SubResource("Animation_7frlh"),
&"sway": SubResource("Animation_fw1ev")
}

[sub_resource type="CircleShape2D" id="CircleShape2D_a6vjd"]
radius = 52.1536

[node name="Angler" type="CharacterBody2D"]
collision_mask = 2
motion_mode = 1
script = ExtResource("1_a6vjd")

[node name="LinearWalker" type="Node" parent="." node_paths=PackedStringArray("_enemy", "_light_burst_detector")]
script = ExtResource("1_orwns")
_enemy = NodePath("..")
_light_burst_detector = NodePath("../LightBurstDetector")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(1.07995, 2.76533)
texture = ExtResource("1_fw1ev")

[node name="KillArea" type="Area2D" parent="."]
script = ExtResource("2_7frlh")

[node name="CollisionShape2D" type="CollisionShape2D" parent="KillArea"]
position = Vector2(2, -1)
shape = SubResource("CircleShape2D_7frlh")

[node name="Light" type="Node2D" parent="."]
position = Vector2(110, 0)

[node name="PointLight2D" type="PointLight2D" parent="Light"]
color = Color(4.58205e-05, 0.804996, 0.96888, 1)
energy = 5.0
texture = SubResource("GradientTexture2D_fw1ev")
texture_scale = 0.75

[node name="Sprite2D2" type="Sprite2D" parent="Light"]
material = SubResource("CanvasItemMaterial_fw1ev")
texture = SubResource("GradientTexture2D_orwns")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_orwns")
}
autoplay = "sway"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(3, 0)
shape = SubResource("CircleShape2D_a6vjd")

[node name="VisibilityDespawner" type="VisibleOnScreenNotifier2D" parent="."]
position = Vector2(23, -4)
scale = Vector2(9.85, 8.7)
script = ExtResource("5_07tka")
_minimum_time = 10.0
metadata/_custom_type_script = "uid://d05fwi2rqf4n2"

[node name="LightBurstDetector" type="Node2D" parent="."]
script = ExtResource("6_3t1x0")
_detection_range = 150.0
